<!DOCTYPE html>
<html lang="en">
<style>
  .select {
    padding: 15px 10px;
  }
  .select input[type=radio]{
    display: none;
  }
  .select input[type=radio]+label{
    display: inline-block;
    cursor: pointer;
    height: 24px;
    width: 90px;
    border: 1px solid #333;
    line-height: 24px;
    text-align: center;
    font-weight:bold;
    font-size:13px;
  }
  .select input[type=radio]+label{
    background-color: #fff;
    color: #333;
  }
  .select input[type=radio]:checked+label{
    background-color: #333;
    color: #fff;
  }
</style>
<head>
  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>ê²Œì‹œë¬¼ ì‘ì„±</title>
  <!-- ì‚¬ì§„ ì—…ë¡œë“œ ê¸°ëŠ¥ ì†ŒìŠ¤ -->
  <script src="https://rawgit.com/enyo/dropzone/master/dist/dropzone.js"></script>
  <link rel="stylesheet" href="https://rawgit.com/enyo/dropzone/master/dist/dropzone.css">
</head>
<body>
<!-- checked="checked" -->
<div class="select">
  <input type="radio" id="korea" name="race" onclick="showDiv(this);" ><label for="korea">Korea</label>
  <input type="radio" id="world" name="race"  onclick="showDiv(this);"><label for="world">World</label>
</div>

<div id = "koreaBox" class="box" style="display: none">
  <table>
    <tr>
      <th>ì œëª©</th>
      <td><input type="text" name="post" placeholder="title" /></td>
    </tr>
    <tr>
      <th>ëª¨ì§‘ê¸°ê°„</th>
      <td><input type="text" name="post" placeholder="untilRecruit"/></td>
    </tr>
    <tr>
      <th>ë²„í‚· ì‹œì‘ì¼</th>
      <td><input type="text" name="post" placeholder="date-start" /></td>
    </tr>
    <tr>
      <th>ë²„í‚· ì¢…ë£Œì¼</th>
      <td><input type="text" name="post" placeholder="date-finish" /></td>
    </tr>
    <tr>
      <th>ë¹„ìš©</th>
      <td><input type="text" name="post" placeholder="3000000" /></td>
    </tr>
    <tr>
      <th>ëª¨ì§‘ì¸ì›</th>
      <td><input type="text" name="post" placeholder="member" /></td>
    </tr>
    <tr>
      <th>ì¹´í…Œê³ ë¦¬</th>
      <td><input type="text" name="post" placeholder="category"/></td>

    </tr>
    <tr>
      <th>ì£¼ì†Œ</th>
      <td><input type="text" id="address_kakao" name="post" readonly /></td>
    </tr>
    <tr>
      <th>ë‚´ìš©</th>
      <td><input type="text" name="post" placeholder="content" /></td>
    </tr>
    <tr>
      <th>ì‚¬ì§„ì²¨ë¶€</th>
      <td>
         <!-- <form action="dropzone.js" name="fileUploader"> ìŠ¤í¬ë¦½íŠ¸ ë”°ë¡œ ë¹¼ë©´ ì‘ë™ ì•ˆí•¨-->
          <form name="fileUploader">
          <div class="dropzone" id="fileDropzone"></div> <button id="btn-upload-file">ì—…ë¡œë“œ</button>
        </form>

        <script>
          //fileDropzone dropzone ì„¤ì •í•  íƒœê·¸ì˜ idë¡œ ì§€ì •
          Dropzone.options.fileDropzone = {
            url: 'http://localhost:8080/post/detailpost', //ğŸ”´ ì—…ë¡œë“œí•  url (ex)ì»¨íŠ¸ë¡¤ëŸ¬) ì–´ë””ì— ì—°ê²°í•´ì•¼í•˜ì§€?
            method: 'post', // ê¸°ë³¸ postë¡œ request ê°. putìœ¼ë¡œë„ í• ìˆ˜ìˆìŒ
            // headers: {
            //     Authorization: `Bearer` + token, // ğŸ”´ Dropzoneì˜ ê¸°ë³¸ ì„¤ì •ì€ íŒŒì¼ì„ ì˜¬ë¦¬ëŠ” ìˆœê°„ ì„œë²„ë¡œ ë³´ë‚´ê¸°ì— headerì— í† í°ì„ ë¶™ì—¬ ë³´ë‚´ì•¼í•œë‹¤.
            // },

            init: function () {
              /* ìµœì´ˆ dropzone ì„¤ì •ì‹œ initì„ í†µí•´ í˜¸ì¶œ */
              var submitButton = document.querySelector("#btn-upload-file");
              var myDropzone = this; //closure
              submitButton.addEventListener("click", function () {
                console.log("ğŸ”µ ì—…ë¡œë“œ ì„±ê³µ"); //tell Dropzone to process all queued files
                myDropzone.processQueue();
              });
            },

            autoProcessQueue: false, // ìë™ì—…ë¡œë“œ ì—¬ë¶€ (trueì¼ ê²½ìš°, ë°”ë¡œ ì—…ë¡œë“œ ë˜ì–´ì§€ë©°, falseì¼ ê²½ìš°, ì„œë²„ì—ëŠ” ì˜¬ë¼ê°€ì§€ ì•Šì€ ìƒíƒœì„ processQueue() í˜¸ì¶œì‹œ ì˜¬ë¼ê°„ë‹¤.)
            clickable: true, // í´ë¦­ê°€ëŠ¥ì—¬ë¶€
            paramName: 'image', // ì„œë²„ì—ì„œ ì‚¬ìš©í•  formdata ì´ë¦„ ì„¤ì • (defaultëŠ” file)

            thumbnailHeight: 120, // Upload icon size
            thumbnailWidth: 120, // Upload icon size

            // maxFiles: 1, // ì—…ë¡œë“œ íŒŒì¼ìˆ˜
            maxFilesize: 10, // ìµœëŒ€ì—…ë¡œë“œìš©ëŸ‰ : 10MB
            // parallelUploads: 1, // ë™ì‹œíŒŒì¼ì—…ë¡œë“œ ìˆ˜(ì´ê±¸ ì§€ì •í•œ ìˆ˜ ë§Œí¼ ì—¬ëŸ¬íŒŒì¼ì„ í•œë²ˆì— ì»¨íŠ¸ë¡¤ëŸ¬ì— ë„˜ê¸´ë‹¤.)
            uploadMultiple: true, // ë‹¤ì¤‘ì—…ë¡œë“œ ê¸°ëŠ¥
            timeout: 300000, //ì»¤ë„¥ì…˜ íƒ€ì„ì•„ì›ƒ ì„¤ì • -> ë°ì´í„°ê°€ í´ ê²½ìš° ê¼­ ë„‰ë„‰íˆ ì„¤ì •í•´ì£¼ì

            addRemoveLinks: true, // ì‚­ì œë²„íŠ¼ í‘œì‹œ ì—¬ë¶€
            dictRemoveFile: 'ì‚­ì œ', // ì‚­ì œë²„íŠ¼ í‘œì‹œ í…ìŠ¤íŠ¸
            acceptedFiles: '.jpeg,.jpg,.png,.gif,.JPEG,.JPG,.PNG,.GIF' // ì´ë¯¸ì§€ íŒŒì¼ í¬ë§·ë§Œ í—ˆìš©

          };
        </script>
      </td>
    </tr>
  </table>
</div>
<div name = "form" id = "worldBox" class="box" style="display: none">
  <table>
    <tr>
      <th>ì œëª©</th>
      <td><input type="text" id="title" name="post" placeholder="title" /></td>
    </tr>
    <tr>
      <th>ëª¨ì§‘ê¸°ê°„</th>
      <td><input type="text" id="untilRecruit" name="post" placeholder="untilRecruit"/></td>
    </tr>
    <tr>
      <th>ë²„í‚· ì‹œì‘ì¼</th>
      <td><input type="text" name="post" placeholder="date-start" /></td>
    </tr>
    <tr>
      <th>ë²„í‚· ì¢…ë£Œì¼</th>
      <td><input type="text" name="post" placeholder="date-finish" /></td>
    </tr>
    <tr>
      <th>ë¹„ìš©</th>
      <td><input type="text" name="post" placeholder="3000000" /></td>
    </tr>
    <tr>
      <th>ëª¨ì§‘ì¸ì›</th>
      <td><input type="text" id="member" name="post" placeholder="member" /></td>
    </tr>
    <tr>
      <th>ì¹´í…Œê³ ë¦¬</th>
      <td><input type="text" id="cartegory" name="post" placeholder="category"/></td>
    </tr>
    <tr>
      <th>ì˜ë¬¸ ì£¼ì†Œ</th>
      <td><input type="text" id="address" name="post" placeholder="5 Avenue Anatole France, 75007 Paris, France"/></td>
    </tr>
    <tr>
      <th>ë‚´ìš©</th>
      <td><input type="text" name="post" placeholder="content" /></td>
    </tr>
  </table>
</div>
<input type="submit" id="submit" value="ì…ë ¥" >
</body>
<script src="//t1.daumcdn.net/mapjsapi/bundle/postcode/prod/postcode.v2.js"></script>

<!-- ì£¼ì†Œ ê²€ìƒ‰ api ì‚¬ìš©-->
<script>
  window.onload = function(){
    document.getElementById("address_kakao").addEventListener("click", function(){ //ì£¼ì†Œì…ë ¥ì¹¸ì„ í´ë¦­í•˜ë©´
      //ì¹´ì¹´ì˜¤ ì§€ë„ ë°œìƒ
      new daum.Postcode({
        oncomplete: function(data) { //ì„ íƒì‹œ ì…ë ¥ê°’ ì„¸íŒ…
          document.getElementById("address_kakao").value = data.address; // ì£¼ì†Œ ë„£ê¸°
          document.querySelector("input[name=post]").focus(); //ìƒì„¸ì…ë ¥ í¬ì»¤ì‹±
        }
      }).open();
    });
  }


  <!-- ë¼ë””ì˜¤ ë²„íŠ¼ í´ë¦­ì‹œ ë™ì‘ -->
  function showDiv(element){
    var tag = document.getElementsByClassName("box");   // class ì´ë¦„ì´ boxì¸ ê°’ë“¤ì„ ê°€ì ¸ì˜´

    for(var i =0; i<tag.length; i++){     // tag[0] = koreanBox, tag[1] = foreignerBox
      if(element.id+"Box"== tag[i].id)    // korean+"Box"ê°€ tag[0]ì˜ ê°’ê³¼ ê°™ì„ë•Œ í•´ë‹¹ div ì¶œë ¥
        tag[i].style.display = "block";
      else                                // ë‹¤ë¥´ë‹¤ë©´ div ìˆ¨ê¸°ê¸°
        tag[i].style.display = "none";
    }
  }
</script>



<script type="text/javascript" src="http://code.jquery.com/jquery-3.5.1.min.js"></script>
<script>
  window.onload = function(){
    document.getElementById("address_kakao").addEventListener("click", function(){ //ì£¼ì†Œì…ë ¥ì¹¸ì„ í´ë¦­í•˜ë©´
      //ì¹´ì¹´ì˜¤ ì§€ë„ ë°œìƒ
      new daum.Postcode({
        oncomplete: function(data) { //ì„ íƒì‹œ ì…ë ¥ê°’ ì„¸íŒ…
          document.getElementById("address_kakao").value = data.address; // ì£¼ì†Œ ë„£ê¸°
          document.querySelector("input[name=post]").focus(); //ìƒì„¸ì…ë ¥ í¬ì»¤ì‹±
        }
      }).open();
    });
  }


  <!-- ë¼ë””ì˜¤ ë²„íŠ¼ í´ë¦­ì‹œ ë™ì‘ -->
  function showDiv(element){
    var tag = document.getElementsByClassName("box");   // class ì´ë¦„ì´ boxì¸ ê°’ë“¤ì„ ê°€ì ¸ì˜´

    for(var i =0; i<tag.length; i++){     // tag[0] = koreanBox, tag[1] = foreignerBox
      if(element.id+"Box"== tag[i].id)    // korean+"Box"ê°€ tag[0]ì˜ ê°’ê³¼ ê°™ì„ë•Œ í•´ë‹¹ div ì¶œë ¥
        tag[i].style.display = "block";
      else                                // ë‹¤ë¥´ë‹¤ë©´ div ìˆ¨ê¸°ê¸°
        tag[i].style.display = "none";
    }
  }

  $(document).ready(function(){
    $("#submit").click(function() {

      // ê²Œì‹œë¬¼ ë°°ì—´ ì„ ì–¸
      let arr = [];

      $('input[name="post"]').each(function(index,item){ // ëª¨ë“  ê°’ ë°°ì—´ì— ì €ì¥
        arr.push($(item).val());
      });


      var finddata = $("#address_kakao").val();   // êµ­ë‚´ ì£¼ì†Œ ê°’ ì €ì¥

      if(finddata.length <1){     // ë§Œì•½ êµ­ë‚´ ì£¼ì†Œ ê°’ì˜ í¬ê¸°ê°€ 1ë³´ë‹¤ ì‘ì„ë•Œ, ì¦‰ êµ­ë‚´ì—ì„œ ë°ì´í„°ë¥¼ ì‘ì„±í•œ ê²ƒì´ ì•„ë‹ë•Œ
        alert("world data")
        var WorldData = {       // í•´ì™¸ ë°ì´í„°
          "title" : arr[9],       // ì œëª©
          "untilRecruit" : arr[10],    // ëª¨ì§‘ì¢…ë£Œ ë‚ ì§œ
          "eventStart" : arr[11],       // ì‹œì‘ì¼
          "eventEnd" : arr[12],          // ì¢…ë£Œì¼
          "cost" : arr[13],              // ë¹„ìš©
          "entrantNum" : arr[14],         // ëª¨ì§‘ì¸ì›
          "category" : arr[15],       // ì¹´í…Œê³ ë¦¬
          "location" : arr[16],        // ì¥ì†Œ
          "content" : arr[17]         // ë‚´ìš©
        }

        //ajax í˜¸ì¶œ
        $.ajax({
          type        :   "post",
          url         :   "/post/detailpost",
          headers : {
            "Content-Type" : "application/json"
          },
          dataType    :   "text",
          // contentType :   "application/json",
          data        :   JSON.stringify(WorldData),
          async : false,
          success     :   function(data){
            console.log(data);
            let url = '/map?postId=${data}';
            window.location.replace(url);
          }
        });
      }

      else{           // êµ­ë‚´ì—ì„œ ì‘ì„±í–ˆì„ë•Œ
        alert("korea data")
        var KoreaData = {         // í•œêµ­ ë°ì´í„°
          "title" : arr[0],       // ì œëª©
          "untilRecruit" : arr[1],    // ëª¨ì§‘ì¢…ë£Œ ë‚ ì§œ
          "eventStart" : arr[2],       // ì‹œì‘ì¼
          "eventEnd" : arr[3],          // ì¢…ë£Œì¼
          "cost" : arr[4],              // ë¹„ìš©
          "entrantNum" : arr[5],         // ëª¨ì§‘ì¸ì›
          "category" : arr[6],       // ì¹´í…Œê³ ë¦¬
          "location" : arr[7],        // ì¥ì†Œ
          "content" : arr[8]         // ë‚´ìš©
        }

        //ajax í˜¸ì¶œ
        $.ajax({
          type        :   "post",
          url         :   "/post/detailpost",
          headers : {
            "Content-Type" : "application/json",
          },
          dataType    :   "text",
          // contentType :   "application/json",
          data        :   JSON.stringify(KoreaData),
          async : false,
          success     :   function(data){      // serverì—ì„œ ê²°ê³¼ê°’ ë°›ì•„ì˜´
            let url = "/post/"+data;
            window.location.replace(url);     // ajaxì—ì„œ redirect ì§„í–‰
          }
        });
      }
    })
  });
</script>
</html>